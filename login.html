<!DOCTYPE html>

<html lang="pt-BR">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Login</title>
<link href="style.css" rel="stylesheet"/>
<style>
body { font-family: Arial, sans-serif; margin: 0; background-color: #f5f5f5; }
.container { max-width: 400px; margin: 50px auto; background: white; padding: 30px; border-radius: 20px; box-shadow: 0 4px 20px rgba(0,0,0,0.1); text-align: center; }
h2 { margin-bottom: 20px; }
.menu-section { font-weight: bold; margin-top: 15px; color: #555; }
.google-btn { display: flex; align-items: center; justify-content: center; background: white; border: 1px solid #ddd; padding: 12px; border-radius: 30px; font-size: 16px; cursor: pointer; box-shadow: 0 2px 5px rgba(0,0,0,0.1); transition: all 0.2s ease; margin-top: 10px; width: 100%; }
.google-btn img { width: 20px; height: 20px; margin-right: 12px; }
.google-btn:hover { background-color: #f8f8f8; transform: scale(1.02); }
</style>
<script async="" defer="" src="https://accounts.google.com/gsi/client"></script>
<script>
function handleCredentialResponse(response) {
    console.log("Credenciais recebidas:", response);
    alert("Login Google bem-sucedido! Token JWT recebido.");
}
</script>
<style>
.site-footer{background:#ffffff;border-top:1px solid #e5e7eb;margin-top:40px}
.site-footer .footer-inner{max-width:1100px;margin:0 auto;padding:18px 16px;display:flex;align-items:center;justify-content:space-between;gap:16px}
.site-footer .copyright{color:#4b5563;font:500 14px/1.4 ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial}
.site-footer .footer-social{display:flex;align-items:center;gap:10px}
.site-footer .footer-social a{display:inline-flex;align-items:center;justify-content:center;width:36px;height:36px;border-radius:9999px;border:1px solid #e5e7eb;background:#ffffff;transition:background .2s, transform .2s, box-shadow .2s}
.site-footer .footer-social a:hover{background:#f3f4f6;transform:translateY(-1px);box-shadow:0 1px 4px rgba(0,0,0,.06)}
.site-footer .footer-social svg{width:18px;height:18px;color:#111827}
@media (max-width:640px){
  .site-footer .footer-inner{padding:16px 14px}
  .site-footer .copyright{font-size:13px}
}
</style>
<link href="../css/fix-logo-gap.css" rel="stylesheet"/></head>
<body>
<!-- seta-voltar -->
<a href="index.html" style="position:absolute; top:10px; left:10px; font-size:32px; text-decoration:none;">&lt;</a>
<div class="container">
<h2> Entrar ou Criar Conta</h2>
<div data-auto_prompt="false" data-callback="handleCredentialResponse" data-client_id="814410231780-9egl4qonpes7aud0v0cvo4an78neefh3.apps.googleusercontent.com" data-context="signin" data-ux_mode="popup" id="g_id_onload">
</div>
<div class="g_id_signin" data-logo_alignment="left" data-shape="pill" data-size="large" data-text="continue_with" data-theme="outline" data-type="standard">
</div>
</div>
<script>
document.addEventListener("DOMContentLoaded", function() {
    const dropdowns = document.querySelectorAll(".menu-item.dropdown > span");
    dropdowns.forEach(item => {
        item.addEventListener("click", function() {
            this.parentElement.classList.toggle("open");
        });
    });
});
</script>

<script async="" defer="" src="https://accounts.google.com/gsi/client"></script>
<div data-auto_prompt="false" data-callback="handleCredentialResponse" data-client_id="814410231780-9egl4qonpes7aud0v0cvo4an78neefh3.apps.googleusercontent.com" data-context="signin" data-ux_mode="popup" id="g_id_onload">
</div>
<div class="g_id_signin" data-type="standard"></div>
<div id="userInfo" style="display:none;">
<img id="userPic" src="" style="width:50px;border-radius:50%;"/>
<span id="userName"></span>
<button onclick="logout()">Sair</button>
</div>
<script>
async function handleCredentialResponse(response) {
    const res = await fetch('https://estudevale.com/login', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        credentials: 'include',
        body: JSON.stringify({ credential: response.credential })
    });
    const data = await res.json();
    if (data.success) {
        document.querySelector('.g_id_signin').style.display = 'none';
        document.getElementById('userInfo').style.display = 'block';
        document.getElementById('userPic').src = data.user.picture;
        document.getElementById('userName').innerText = data.user.name;
    }
}

async function logout() {
    await fetch('https://estudevale.com/logout', { credentials: 'include' });
    document.querySelector('.g_id_signin').style.display = 'block';
    document.getElementById('userInfo').style.display = 'none';
}

// Checar se já está logado
(async () => {
    const res = await fetch('https://estudevale.com/me', { credentials: 'include' });
    const data = await res.json();
    if (data.loggedIn) {
        document.querySelector('.g_id_signin').style.display = 'none';
        document.getElementById('userInfo').style.display = 'block';
        document.getElementById('userPic').src = data.user.picture;
        document.getElementById('userName').innerText = data.user.name;
    }
})();
</script>

<footer class="site-footer"><div class="footer-inner"><div class="footer-left"><span class="copyright">© 2025 - Um produto Estudantes de Atitude</span></div><div class="footer-social"><a aria-label="Instagram" href="https://www.instagram.com/estudantes_de_atitude_cepmgsv/" rel="noopener" target="_blank"><svg aria-hidden="true" viewbox="0 0 24 24"><path d="M7 2h10a5 5 0 0 1 5 5v10a5 5 0 0 1-5 5H7a5 5 0 0 1-5-5V7a5 5 0 0 1 5-5zm0 2a3 3 0 0 0-3 3v10a3 3 0 0 0 3 3h10a3 3 0 0 0 3-3V7a3 3 0 0 0-3-3H7zm5 3.5A5.5 5.5 0 1 1 6.5 13 5.5 5.5 0 0 1 12 7.5zm0 2A3.5 3.5 0 1 0 15.5 13 3.5 3.5 0 0 0 12 9.5zM18 6.2a1 1 0 1 1-1 1 1 1 0 0 1 1-1z" fill="currentColor"></path></svg></a><a aria-label="YouTube" href="https://www.youtube.com/@CepmgSebasti%C3%A3odoVale" rel="noopener" target="_blank"><svg aria-hidden="true" viewbox="0 0 24 24"><path d="M23.5 6.2a3 3 0 0 0-2.1-2.1C19.1 3.5 12 3.5 12 3.5s-7.1 0-9.4.6A3 3 0 0 0 .5 6.2 31.7 31.7 0 0 0 0 12a31.7 31.7 0 0 0 .5 5.8 3 3 0 0 0 2.1 2.1C4.9 20.5 12 20.5 12 20.5s7.1 0 9.4-.6a3 3 0 0 0 2.1-2.1A31.7 31.7 0 0 0 24 12a31.7 31.7 0 0 0-.5-5.8zM9.8 15.5v-7l6 3.5z" fill="currentColor"></path></svg></a></div></div></footer>
</body>
</html>
